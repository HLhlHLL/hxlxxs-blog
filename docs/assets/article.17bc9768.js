import{A as S}from"./index.2718197b.js";import{C as j}from"./index.dd468ec8.js";import{d as L,a as V,r as p,o as Q,w as D,b as l,c as o,h as a,k as $,F as A,e as E,j as B,t as _,u as k,g as I,N as R,E as M,p as W,l as Y,m as q,i as z,_ as G}from"./index.daa6cca7.js";import{f as H}from"./shared.ddb0cd84.js";import{u as J}from"./articles.efae0f2b.js";import"./md-editor-v3.es.b94cfe84.js";import"./generator.b4402241.js";const u=v=>(W("data-v-7719429a"),v=v(),Y(),v),K={class:"article animate__animated animate__fadeIn"},O=u(()=>a("div",{class:"divider"},[a("div",{class:"div-mark"})],-1)),P={class:"tags"},U=u(()=>a("strong",null,"Tags:",-1)),X=["onClick"],Z={class:"related-articles"},tt=u(()=>a("div",{class:"text"},"\u76F8\u5173\u6587\u7AE0",-1)),at={key:0},et=["onClick"],st={key:1,class:"related-blank"},it=u(()=>a("span",null,"\u6682\u65E0\u66F4\u591A\u76F8\u5173\u6587\u7AE0",-1)),ct=[it],lt={class:"article-nav"},ot={key:0,class:"pre-article"},nt=u(()=>a("i",{class:"iconfont icon-left"},null,-1)),rt={key:1,class:"next-article"},ut=u(()=>a("i",{class:"iconfont icon-right"},null,-1)),dt=R('<div class="copyright" data-v-7719429a><ul data-v-7719429a><li class="copyright-author" data-v-7719429a><strong data-v-7719429a>\u672C\u6587\u4F5C\u8005:</strong> hxlxx </li><li class="copyright-link" data-v-7719429a><strong data-v-7719429a>\u672C\u6587\u94FE\u63A5:</strong><a href="javascript:;" data-v-7719429a></a></li><li class="copyright-license" data-v-7719429a><strong data-v-7719429a>\u7248\u6743\u58F0\u660E:</strong> \u672C\u535A\u5BA2\u6240\u6709\u6587\u7AE0\u9664\u7279\u522B\u58F0\u660E\u5916\uFF0C\u5747\u91C7\u7528 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-7719429a> BY-NC-SA </a> \u8BB8\u53EF\u534F\u8BAE\u3002\u8F6C\u8F7D\u8BF7\u6CE8\u660E\u51FA\u5904\uFF01 </li></ul></div><div class="followme" data-v-7719429a><span data-v-7719429a>\u8054\u7CFB\u6211</span><div class="social-list" data-v-7719429a><div class="social-item" data-v-7719429a><i class="iconfont icon-QQ" data-v-7719429a></i> QQ </div><div class="social-item" data-v-7719429a><i class="iconfont icon-weixin" data-v-7719429a></i> WeChat </div></div></div>',2),vt=L({__name:"article",setup(v){const h=M(),F=q(),n=J(),d=z("global"),t=V({article:{}}),w=p([]),x=p(!0),i=p(Number(h.params.index)),g=p([]),b=e=>{F.push({name:"tag_articles",params:{tag:e.tagName,tid:e.tid}})},f=()=>{F.replace({name:"article",params:{aid:n.articleList[i.value].aid,index:i.value,objectId:n.articleList[i.value].objectId}})},y=e=>{e==="previous"?(--i.value,f()):e==="next"&&(++i.value,f())},N=e=>{const c=n.articleList.findIndex(r=>r.aid===e.aid);i.value=c,f()},T=async()=>{try{const e=h.params.aid,{data:c}=await d.$http.get(`/api/1.1/classes/contentArticle?where={"aid":"${e}"}`);t.article=c.results[0],w.value=H(c.results[0].comment.slice(0))||[],x.value=!1;const{data:r}=await d.$http.get(`/api/1.1/classes/articles?where={"cid": "${t.article.cid}"}?limit=5`);g.value=r.results.filter(C=>C.aid!==t.article.aid),await d.$http.put(`/api/1.1/classes/contentArticle/${t.article.objectId}`,{meta:{visitedTimes:t.article.meta.visitedTimes+1,wordCount:t.article.meta.wordCount,costTime:t.article.meta.costTime}});const{data:m}=await d.$http.get(`/api/1.1/classes/articles?where={"aid": "${t.article.aid}"}`),s=m.results[0];await d.$http.put(`/api/1.1/classes/articles/${s.objectId}`,{meta:{visitedTimes:t.article.meta.visitedTimes+1,wordCount:t.article.meta.wordCount,costTime:t.article.meta.costTime}}),t.article.meta.visitedTimes++}catch{}};return Q(()=>{T()}),D(()=>h,()=>{T()},{deep:!0}),(e,c)=>{var r,m;return l(),o(A,null,[a("div",K,[$(S,{article:t.article,loading:x.value},null,8,["article","loading"])]),O,a("div",P,[U,(l(!0),o(A,null,E(t.article.tags,s=>(l(),o("span",{class:"tag",key:s.tid,onClick:C=>b(s)}," # "+_(s.tagName),9,X))),128))]),a("div",Z,[tt,g.value.length>0?(l(),o("ul",at,[(l(!0),o(A,null,E(g.value,s=>(l(),o("li",{class:"title",key:s.aid},[a("span",{class:"link",onClick:C=>N(s)},_(s.title),9,et)]))),128))])):(l(),o("div",st,ct))]),a("div",lt,[i.value>=1?(l(),o("div",ot,[a("span",{onClick:c[0]||(c[0]=s=>y("previous"))},[nt,B(" "+_((r=k(n).articleList[i.value-1])==null?void 0:r.title),1)])])):I("",!0),i.value<k(n).articleList.length-1?(l(),o("div",rt,[a("span",{onClick:c[1]||(c[1]=s=>y("next"))},[B(_((m=k(n).articleList[i.value+1])==null?void 0:m.title)+" ",1),ut])])):I("",!0)]),dt,$(j,{comment:w.value,article:t.article},null,8,["comment","article"])],64)}}});const At=G(vt,[["__scopeId","data-v-7719429a"]]);export{At as default};
